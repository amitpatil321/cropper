(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(t,e,n){t.exports=n(183)},110:function(t,e,n){},111:function(t,e,n){},112:function(t,e,n){},183:function(t,e,n){"use strict";n.r(e);var o=n(1),a=n.n(o),r=n(6),i=n.n(r),c=(n(110),n(101)),s=n(50),l=n(51),h=n(55),d=n(52),u=n(56),g=n(100),f=n(186),v=n(185),m=n(11),p=n(13),b=n(102),w="rgb(4, 247, 4)",y=8,x={tl:"nw-resize",bl:"nesw-resize",tr:"sw-resize",br:"nwse-resize"};function j(t,e){return{x:t.clientX-e.getBoundingClientRect().left,y:t.clientY-e.getBoundingClientRect().top}}function O(t){t.ctx.clearRect(0,0,t.overlay.width,t.overlay.height),t.ctx.fillStyle="rgba(0, 0, 0, 0.5)",t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height)}function E(t,e){if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){var n=e.left,o=e.top,a=e.width,r=e.height;t.ctx.save(),t.ctx.beginPath(),t.ctx.rect(n,o,a,r),t.ctx.setLineDash([4]),t.ctx.strokeStyle=w,t.ctx.lineWidth=1,t.ctx.stroke(),t.ctx.restore(),function(t,e){var n=e.left,o=e.top,a=e.width,r=e.height;t.globalAlpha=1,t.ctx.drawImage(t.imageObj,n,o,a,r,n,o,a,r)}(t,e),function(t,e){t.ctx.strokeStyle=w;var n=Y(e),o=n.tl,a=n.bl,r=n.br,i=n.tr;t.ctx.strokeRect(o.left,o.top,o.width,o.height),t.ctx.strokeRect(a.left,a.top,a.width,a.height),t.ctx.strokeRect(r.left,r.top,r.width,r.height),t.ctx.strokeRect(i.left,i.top,i.width,i.height)}(t,e)}}function k(t,e){if(!t.rectangles.length)return{box:-1,point:"outside"};for(var n=0;n<t.rectangles.length;n++){var o=e.clientX-t.canvas.offsetLeft,a=e.clientY-t.canvas.offsetTop,r=Object(b.a)({},t.rectangles[n]),i=r.cords;if(a>=i.top&&a<=i.top+i.height&&o>=i.left&&o<=i.left+i.width)return{box:n,point:"inside"};var c=r.dragPoints,s=c.tl,l=c.bl,h=c.br,d=c.tr;if(a>=s.top&&a<=s.top+s.height&&o>=s.left&&o<=s.left+s.width)return{box:n,point:"tl"};if(a>=l.top&&a<=l.top+l.height&&o>=l.left&&o<=l.left+l.width)return{box:n,point:"bl"};if(a>=d.top&&a<=d.top+d.height&&o>=d.left&&o<=d.left+l.width)return{box:n,point:"tr"};if(a>=h.top&&a<=h.top+h.height&&o>=h.left&&o<=h.left+l.width)return{box:n,point:"br"}}return{box:-1,point:"outside"}}function X(t){t.rectangles.forEach(function(e,n){E(t,e.cords,e.show)})}function Y(t){if(t){var e=t.left,n=t.top,o=t.width,a=t.height;return{tl:{left:e-y/2,top:n-y/2,width:y,height:y},bl:{left:e-y/2,top:n+a-y/2,width:y,height:y},br:{left:e+o-y/2,top:a+n-y/2,width:y,height:y},tr:{left:e+o-y/2,top:n-y+y/2,width:y,height:y}}}}function M(){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",e="",n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}n(111);var P=function(t){function e(){var t,n;Object(s.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(h.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(a)))).rectangles=[],n.state={rectangles:[]},n.onMouseDown=function(t){n.currentBox=k(Object(p.a)(n),t);var e=n.currentBox,o=e.box,a=e.point;-1===o&&"outside"===a?(n.mouseDown=!0,n.dragPoints={},n.dragPoints.left=j(t,n.canvas).x,n.dragPoints.top=j(t,n.canvas).y):-1!==o&&"inside"===a?(n.boxDragging=!0,n.lastX=t.clientX,n.lastY=t.clientY):-1!==o&&!1===["inside","outside"].includes(a)&&(n.resizing=!0,n.lastX=t.clientX,n.lastY=t.clientY)},n.onMouseMove=function(t){if(n.mouseDown)O(Object(p.a)(n)),n.dragPoints.width=j(t,n.canvas).x-n.dragPoints.left,n.dragPoints.height=j(t,n.canvas).y-n.dragPoints.top,E(Object(p.a)(n),n.dragPoints);else if(n.boxDragging){var e=t.clientX-n.lastX,o=t.clientY-n.lastY,a=n.rectangles[n.currentBox.box];e+=a.cords.left,o+=a.cords.top,a.cords.top=o,a.cords.left=e,a.dragPoints=Y(a.cords),O(Object(p.a)(n)),n.lastX=t.clientX,n.lastY=t.clientY}else if(n.resizing&&-1!==n.currentBox.box){var r,i,c=n.rectangles[n.currentBox.box];switch(n.currentBox.point){case"tl":r=n.lastX-t.clientX,i=n.lastY-t.clientY,c.cords.left-=r,c.cords.top-=i,c.cords.width+=r,c.cords.height+=i;break;case"tr":r=t.clientX-n.lastX,i=n.lastY-t.clientY,c.cords.top-=i,c.cords.width+=r,c.cords.height+=i;break;case"br":i=t.clientY-n.lastY,r=t.clientX-n.lastX,c.cords.width+=r,c.cords.height+=i;break;case"bl":r=n.lastX-t.clientX,i=t.clientY-n.lastY,c.cords.left-=r,c.cords.width+=r,c.cords.height+=i}c.dragPoints=Y(c.cords),n.lastX=t.clientX,n.lastY=t.clientY,O(Object(p.a)(n)),X(Object(p.a)(n))}(n.mouseDown||n.boxDragging||n.resizing)&&X(Object(p.a)(n)),n.currentBox=k(Object(p.a)(n),t),function(t){var e=t.currentBox,n=e.box,o=e.point;t.overlay.style.cursor=-1!==n&&"inside"!==o?x[o]:-1!==n&&"inside"===o?"move":"initial"}(Object(p.a)(n))},n.onMouseUp=function(t){n.mouseDown&&(n.rectangles.push({cords:n.dragPoints,dragPoints:Y(n.dragPoints),show:!0}),n.props.rectAdded(n.rectangles)),n.mouseDown=!1,n.boxDragging=!1,n.resizing=!1},n}return Object(u.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){document.querySelector("#overlay").addEventListener("mousedown",this.onMouseDown),document.querySelector("#overlay").addEventListener("mousemove",this.onMouseMove),document.querySelector("#overlay").addEventListener("mouseup",this.onMouseUp),this.canvas=document.getElementById("myCanvas"),this.overlay=document.getElementById("overlay"),this.baseCtx=this.canvas.getContext("2d"),this.ctx=this.overlay.getContext("2d"),function(t){t.imageObj=new Image,t.imageObj.src="./pic.jpg";var e=t;t.imageObj.onload=function(){e.canvas.width=e.imageObj.naturalWidth,e.canvas.height=e.imageObj.naturalHeight,e.baseCtx.drawImage(e.imageObj,0,0),e.overlay.style.left=e.canvas.clientX,e.overlay.style.top=e.canvas.clientY,e.overlay.width=e.canvas.width,e.overlay.height=e.canvas.height,e.ctx.fillStyle="rgba(0, 0, 0, 0.6)",e.ctx.fillRect(0,0,e.canvas.width,e.canvas.height)}}(this)}},{key:"componentWillUnmount",value:function(){document.querySelector("#overlay").removeEventListener("mousedown",this.onMouseDown),document.querySelector("#overlay").removeEventListener("mousemove",this.onMouseMove),document.querySelector("#overlay").removeEventListener("mouseup",this.onMouseUp)}},{key:"shouldComponentUpdate",value:function(){return this.props.rectangles.length&&(this.rectangles=this.props.rectangles,O(this),X(this)),!0}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("canvas",{id:"myCanvas"}),a.a.createElement("canvas",{id:"overlay"}))}}]),e}(o.Component),B=(n(112),n(113),f.a.Header),D=f.a.Content,S=f.a.Sider,C=function(t){function e(){var t,n;Object(s.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(h.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(a)))).state={rectangles:[]},n._rectAdded=function(t){n.setState({rectangles:t})},n._hide=function(t){var e=Object(c.a)(n.state.rectangles);e[t].show=!e[t].show,n.setState({rectangles:e})},n}return Object(u.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.state.rectangles;return console.log(e),a.a.createElement("div",{className:"App"},a.a.createElement(f.a,null,a.a.createElement(B,{className:"header"},"This is header!"),a.a.createElement(f.a,null,a.a.createElement(S,{width:100,style:{background:"#fff"}}),a.a.createElement(f.a,{style:{padding:"0"}},a.a.createElement(D,{className:"content"},a.a.createElement(P,{rectAdded:this._rectAdded,rectangles:this.state.rectangles}))),a.a.createElement(S,{width:200,style:{background:"#fff",paddingLeft:"5px"}},a.a.createElement(v.a,{itemLayout:"horizontal",dataSource:e,renderItem:function(e,n){return a.a.createElement(v.a.Item,null,a.a.createElement(v.a.Item.Meta,{title:[a.a.createElement(m.a,{theme:e.show?"twoTone":"",key:M(),type:"eye",onClick:function(e){return t._hide(n)}})," Item "+n,a.a.createElement(m.a,{className:"float-right",key:M(),type:"delete"})]}))}})))))}}]),e}(o.Component),I=Object(g.hot)(C);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[105,1,2]]]);
//# sourceMappingURL=main.c4132306.chunk.js.map